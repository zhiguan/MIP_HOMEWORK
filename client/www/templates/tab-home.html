<ion-view>

  <ion-content >

    <div class="list card zeromargin" ng-repeat="post in posts">
      <div class="item item-avatar">
        <img ng-src="{{ post.user.profileImageSmall }}">
        <h2 style="margin-top: 8px;">{{ post.user.username }}</h2>
        <button class="button button-outline button-positive button-small item-pull-right">
          Follow
        </button>
      </div>

      <div class="item item-image">
        <img ng-src="{{post.image}}">
      </div>

      <div class="item">
        <button class="icon button button-icon" ng-class="{'ion-ios-heart': post.userLike, 'ion-ios-heart-outline': !post.userLike}" ng-click="toggleLike(post)"></button>
        <button class="icon button button-icon ion-ios-chatbubble-outline" ng-click="comment(post)"></button>
        <p>
          <i class="icon ion-ios-heart"></i> {{post.likes}} likes
        </p>
        <div>
          <p>
            <b>{{post.user.username}}</b> {{post.caption}}
          </p>
          <a ng-if="post.comments.length > 4" class="postTotalCommentIndicator" ng-click="comment(post)">
            View all {{ post.comments.length }} comments
          </a>
          <p ng-repeat="c in post.comments | limitTo:4">
            <b>{{c.user.username}}</b> {{c.text}}
          </p>
        </div>
      </div>
    </div>
  </ion-content>
</ion-view>
